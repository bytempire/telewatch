<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑ - POLLEN</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="app" id="app">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
        <header class="header">
            <div class="nav-back" onclick="goBack()">
                ‚Üê –ù–∞–∑–∞–¥
            </div>
            <div class="logo-container">
                <img src="logo.png" alt="POLLEN" class="logo-small">
            </div>
        </header>

        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
        <main class="main">
            <div class="custom-order-container">
                <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ -->
                <div class="custom-order-image" onclick="openFullscreenImage()">
                    <img src="2.jpg" alt="–ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞" class="development-image">
                    <div class="image-overlay">
                        <span class="expand-icon">üîç</span>
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∞ –∑–≤–æ–Ω–∫–∞ -->
                <div class="phone-call-block">
                    <div class="phone-icon">üìû</div>
                    <h3>–°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏</h3>
                    <p>–î–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏</p>
                    <button class="phone-button" onclick="handlePhoneCall()">
                        <span class="phone-number">+7 (910) 574-26-20</span>
                        <span class="phone-action">–ü–æ–∑–≤–æ–Ω–∏—Ç—å</span>
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ -->
    <div class="fullscreen-modal" id="fullscreenModal">
        <div class="fullscreen-modal-content">
            <span class="fullscreen-close" id="fullscreenClose">&times;</span>
            <img class="fullscreen-image" id="fullscreenImage" src="2.jpg" alt="–ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞">
        </div>
    </div>

    <script>
        // Telegram Web App –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        let tg = window.Telegram?.WebApp;

        if (tg) {
            tg.ready();
            tg.expand();
            tg.enableClosingConfirmation();
        } else {
            console.log('Telegram Web App –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω');
        }

        // –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function openFullscreenImage() {
            console.log('üñºÔ∏è –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º');
            const modal = document.getElementById('fullscreenModal');
            
            if (!modal) {
                console.error('‚ùå –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!');
                return;
            }
            
            console.log('‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞–π–¥–µ–Ω–æ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º');
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            if (tg && tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('light');
            }
        }

        function closeFullscreenImage() {
            const modal = document.getElementById('fullscreenModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            
            if (tg && tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('light');
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É –∑–≤–æ–Ω–∫–∞
        async function handlePhoneCall() {
            const phoneNumber = '+79105742620';
            const formattedNumber = '+7 (910) 574-26-20';
            
            console.log('üìû –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–≤–µ—Ä—à–∏—Ç—å –∑–≤–æ–Ω–æ–∫ –Ω–∞', phoneNumber);
            
            // –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å - –∏–∑–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
            const button = document.querySelector('.phone-button');
            const actionSpan = button?.querySelector('.phone-action');
            const originalText = actionSpan?.textContent;
            
            if (actionSpan) {
                actionSpan.textContent = '–û–±—Ä–∞–±–æ—Ç–∫–∞...';
                button.style.opacity = '0.8';
            }
            
            // Haptic feedback
            if (tg && tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('medium');
            }
            
            // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
            await new Promise(resolve => setTimeout(resolve, 300));

            // –°–ø–æ—Å–æ–± 1: –ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Telegram Web App API
            if (tg && tg.openLink) {
                try {
                    console.log('üîó –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ tg.openLink');
                    tg.openLink(`tel:${phoneNumber}`);
                    return;
                } catch (error) {
                    console.log('‚ùå tg.openLink –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª:', error);
                }
            }

            // –°–ø–æ—Å–æ–± 2: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            try {
                await navigator.clipboard.writeText(phoneNumber);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram API
                if (tg && tg.showAlert) {
                    tg.showAlert(`üìû –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!\n\n${formattedNumber}\n\n–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–∑–≤–æ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –ª—é–±–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.`);
                } else {
                    alert(`üìû –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!\n\n${formattedNumber}\n\n–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–∑–≤–æ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –ª—é–±–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.`);
                }
                console.log('‚úÖ –ù–æ–º–µ—Ä —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞');
                return;
            } catch (error) {
                console.log('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–º–µ—Ä:', error);
            }

            // –°–ø–æ—Å–æ–± 3: –ü–æ–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏
            const message = `üìû –ü–æ–∑–≤–æ–Ω–∏—Ç–µ –Ω–∞–º:\n\n${formattedNumber}\n\n(–ù–æ–º–µ—Ä –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–ª–∏–Ω–Ω—ã–º –Ω–∞–∂–∞—Ç–∏–µ–º)`;
            
            if (tg && tg.showAlert) {
                tg.showAlert(message);
            } else {
                alert(message);
            }

            // –°–ø–æ—Å–æ–± 4: –ü–æ–ø—ã—Ç–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ tel: –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
            try {
                window.location.href = `tel:${phoneNumber}`;
                console.log('‚úÖ –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ tel: —Å—Å—ã–ª–∫—É');
            } catch (error) {
                console.log('‚ùå tel: —Å—Å—ã–ª–∫–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞:', error);
            }

            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
            setTimeout(() => {
                if (actionSpan && originalText) {
                    actionSpan.textContent = originalText;
                    button.style.opacity = '1';
                }
            }, 1000);
        }

        // –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        function goBack() {
            window.location.href = 'index.html';
            
            if (tg && tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('light');
            }
        }


        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', () => {
            // –ê–Ω–∏–º–∞—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            const elements = document.querySelectorAll('.custom-order-image, .phone-call-block');
            elements.forEach((element, index) => {
                setTimeout(() => {
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }, index * 150);
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
            const fullscreenModal = document.getElementById('fullscreenModal');
            const fullscreenClose = document.getElementById('fullscreenClose');

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∫—Ä–µ—Å—Ç–∏–∫
            if (fullscreenClose) {
                fullscreenClose.addEventListener('click', closeFullscreenImage);
            }

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            if (fullscreenModal) {
                fullscreenModal.addEventListener('click', (e) => {
                    if (e.target === fullscreenModal) {
                        closeFullscreenImage();
                    }
                });
            }

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –Ω–∞–∂–∞—Ç–∏—é Escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && fullscreenModal.style.display === 'flex') {
                    closeFullscreenImage();
                }
            });
        });
    </script>
</body>
</html>
